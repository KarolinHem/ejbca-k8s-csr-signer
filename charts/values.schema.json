{
    "$schema": "http://json-schema.org/draft-07/schema",
    "required": [
        "ejbca"
    ],
    "properties": {
        "ejbca": {
            "type": "object",
            "required": [
                "useEST",
                "credsSecretName",
                "ejbcaSslUsesPubliclyTrustedCa"
            ],
            "properties": {
                "useEST": {
                    "type": "boolean"
                },
                "credsSecretName": {
                    "type": "string",
                    "pattern":  ".+"
                },
                "ejbcaSslUsesPubliclyTrustedCa": {
                    "type": "boolean"
                }
            },
            "allOf": [
                {
                    "if": {
                        "properties": { "useEST": { "const": false } }
                    },
                    "then": {
                        "properties": { "clientCertSecretName": { "pattern":  ".+" } }
                    }
                },
                {
                    "if": {
                        "properties": { "ejbcaSslUsesPubliclyTrustedCa":  { "const": false } }
                    },
                    "then": {
                        "properties": { "caCertConfigmapName": { "pattern":  ".+" } }
                    }
                }
            ]
        }
    }
}